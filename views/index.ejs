<!doctype html>
<html>

<head>
    <style>html{visibility: hidden;opacity:0;}</style>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-184913227-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-184913227-1');

    </script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MP5QNWJ');</script>
    <!-- End Google Tag Manager -->


    <meta charset="utf-8">
    <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> -->
    <title>French Pronunciation Hacker</title>
    <meta name="description" content="Practice and improve your french pronunciation using french pronunciation hacker. French story adapted for intermediates. ">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="rcU2suQIGFO-3QKC5uYkmavSYxOZmo499VPCPTd4IPo" />

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
    <link rel="manifest" href="assets/site.webmanifest" crossorigin="use-credentials">
    <link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- <link rel="stylesheet" href="assets/css/bootstrap.css"> -->

    

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@700;800&display=swap" rel="stylesheet">

    <!-- new fonts -->
    <link rel="stylesheet" href="https://use.typekit.net/yue6eem.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Text:ital@0;1&display=swap" rel="stylesheet"> 

<noscript>
    <style>
      /**
      * Reinstate scrolling for non-JS clients
      */
      .simplebar-content-wrapper {
        overflow: auto;
      }
    </style>
  </noscript>

    


    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/plyr/3.6.2/plyr.css" integrity="sha512-jrLDXl9jUPe5DT19ukacvpX39XiErIBZxiaVMDFRe+OAKoBVYO126Dt7cvhMJ3Fja963lboD9DH+ev/2vbEnMw==" crossorigin="anonymous" /> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/plyr/3.6.3/plyr.min.css" integrity="sha512-dq8AeRs1cVyiW4/Ybo7Rn8+TlezUqjZrkZQd+zmR0ina6bSDcFyfM1ID7Mkj9QHmkk7sxZMEvspxL1U91tZS5w==" crossorigin="anonymous" />
    <link rel="stylesheet" href="assets/css/tooltip.css">
</head>

<body>

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MP5QNWJ"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->

    <!-- <nav class="navbar navbar-light">
        <a class="navbar-brand mx-auto" href="#">
            <img src="assets/logo.png" height="90px" alt="" style="max-width:100%;object-fit:scale-down">
        </a>
    </nav> -->
    
    <div class="btn-group user_button">
        <button class="btn btn-secondary btn-lg dropdown-toggle user_toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          
        </button>
        <div class="dropdown-menu dropdown-menu-right">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <a class="dropdown-item" href="#">Something else here</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" onclick="signout()">Sign Out</a>
        </div>
      </div>

    <nav class="navbar navbar-expand-lg navbar-light mobile">
        <a class="navbar-brand" href="#">
            
            <!-- <img src="/assets/android-chrome-256x256.png" height="30px" alt=""> -->
            <h5 class="mobile navbar_title"> French Pronunciation Hacker</h5>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <h2 id="hello_mobile" class="mx-auto"></h2>
          <ul class="navbar-nav">
            <!-- <li class="nav-item active">
              <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
            </li> -->
            <li class="nav-item">
              <a class="nav-link signin signin_mobile">Sign In</a>
            </li>
            <li class="nav-item">
              <a class="nav-link register register_mobile">Sign Up</a>
            </li>
            <li class="nav-item">
                <a class="nav-link signout_mobile" onclick="signout()">Sign Out</a>
              </li>
            <!-- <li class="nav-item">
              <a class="nav-link disabled" href="#">Disabled</a>
            </li> -->
          </ul>
        </div>
      </nav>
    
    <div class="container-fluid h-100 w-100">

        <!-- Objective Modal -->
        <div class="modal fade" id="objectiveModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-keyboard="false" data-backdrop="static">
            <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                
                <div class="modal-body">
                
                    <h4 class="justify-content-center d-flex">Bienvenue! Choisis un objectif pour progresser en francais:</h4>
                    <br>
                    <!-- <div class="duo_button objective_buttons">10 minutes a day</div> -->
                    <h5 class="no_objective_selected justify-content-center ">Please select an objective </h5>
                    <div class="objectives_holder mx-auto">
                        <button type="button" class="btn btn-primary objective_button objective_button1">
                            <span class="float-left">Tranquille</span> <span class="float-right">5 minutes / jour</span>
                        </button>
                        <button type="button" class="btn btn-primary objective_button objective_button2">
                            <span class="float-left">Regulier</span> <span class="float-right">10 minutes / jour</span>
                        </button>
                        <button type="button" class="btn btn-primary objective_button objective_button3">
                            <span class="float-left">Serieux</span> <span class="float-right">15 minutes / jour</span>
                        </button>
                        <button type="button" class="btn btn-primary objective_button objective_button4">
                            <span class="float-left">Champion</span> <span class="float-right">20 minutes / jour</span>
                        </button>
                        <div class="duo_button objective_buttons objective_continue mt-3">Continue</div>

                    </div>
                    
                    <!-- <div class="objectives_holder mx-auto">
                        <button type="button" class="btn btn-primary objective_button pt-0 mt-0">
                            <span class="float-left">Hello</span> <span class="float-right">Jello</span>

                        </button>
                    </div> -->
                </div>
               
            </div>
            </div>
        </div>

        <!-- Create an account Modal -->
        <div class="modal fade" id="createaccModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                
                <div class="modal-body">

                    <br>
                    <h4 class="justify-content-center d-flex">Pour tracer ta progression et ton objectif: </h4>
                    <br>
                    <!-- <div class="duo_button objective_buttons">10 minutes a day</div> -->
                    
                    <div class="duo_button createacc_button mx-auto">cr√©er un compte</div>

                    <br>
                    <div class="duo_button not_now mx-auto">Pas maintenant</div>
                </div>
               
            </div>
            </div>
        </div>

        <!-- Button trigger modal -->
        <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
            Launch demo modal
        </button> -->

        <div id="signinbutton" class="signin_container">
            <div id="signin" class="duo_button signin">
                Sign In
            </div>
        </div> 
        
        <div id="registerbutton" class="register_container">
            <div id="register" class="duo_button register">
                Sign Up
            </div>
        </div> 
        
        
        <!-- Title and Logo -->
        <div class="row justify-content-end flow"> 
            <!-- <h5 class="pr-2 mobiletitle mobile"> French Pronunciation Hacker</h5> -->
            <h1 class="mx-auto desktoptitle desktop">French Pronunciation Hacker</h1>
            <button style='display:none' type="button" id="logout">Logout</button>

            <script>
                 const token = localStorage.getItem("token");
                if (!token){
                    // document.getElementById('logout').innerHTML = "login";

                    // If not signed in and screen bigger than 1024 show the signin/signup options
                    if (window.innerWidth>=1024){
                        var register = document.getElementById("registerbutton");
                        register.style.display = "flex";
                        var signin = document.getElementById("signinbutton");
                        signin.style.display = "flex";
                    }
                    
                }
            </script>

        </div>
        
        <!-- <div class="row show">
            <h3 class="booktitle">Le Comte de Monte Cristo</h3>
        </div> -->

        <!-- Audio player row (hidden) -->
        <div class="row show">
            <div class="col-2"></div>
            <div class="col show desktop">
                 <audio id="player" controls style="display:none;">
                    <source src="https://res.cloudinary.com/mohacool/video/upload/v1610674124/fullbook_jdncl3.mp3" type="audio/mp3" />
                </audio>
            </div>
            <div class="col-2"></div>
            
        </div>

        <!-- Timer row -->
        <div class="row">
            <div class="col-2 mt-auto desktop">
                <!-- <div class="timer_holder">
                    <img class="timer_clock" src="/assets/timer.png" alt="" height="40px">
                    <div id="ten-countdown" class="timer"></div>
                </div> -->
               
            </div>
            <div class="col flow"></div>
            <div class="col-2 mt-auto desktop"></div>
        </div>

        <div class="row top show">

            <!-- lazy load -->
            <!-- <div class="col-2 mt-auto desktop">
                <img class="mytooltip tooltip-left desktop" width="100%" src="assets/tiny/tooltip-left2.png" alt="left tooltip">
            </div> -->

            <div class="col-2 guy_and_timer mt-auto desktop" data-toggle="modal" data-target="#objectiveModal">
                <div class="timer_holder">
                    <img class="timer_clock" src="/assets/timer.png" alt="" height="40px">
                    <div id="ten-countdown" class="timer">10:00</div>
                </div>
                <div id="tooltipleft">
                </div>
            </div>

            <div class="col flow">
                <div id="move" class="pt-5 pb-4 movemobile">

                    <div class="row show px-0 mx-0 pt-4">
                        <h3 class="booktitle"> ~ Le Comte de Monte Cristo ~</h3>
                        
                    </div>
                    
                    <!-- <div class="row px-0 mx-0 pb-4">
                        <div class="buybutton">
                            <img src="assets/cart.png" height="25px" alt="">
                            <h5 class="buytext">Buy the complete book + audiobook</h5>
                        </div>

                    </div> -->

                    <div data-simplebar class="story_holder">

                        <!-- <h1 class="book-title text-center">Le Comte de Monte-Cristo</h1>
                        <br>
                        <div id='chapter_title'></div>
                        <br><br><br> -->
                        
                        <h3>
                            <p id="story"></p>
                        </h3>
                    </div>
                    

                </div>
            </div>
            <div class="col-2 mt-auto desktop">

                <!-- skipped words displaybox -->
                <!-- <div class="row">
                        <div data-simplebar class="skippedwords mx-auto">
                            <ul id="skippedwordslist">
                                <h5 style="font-size:15px">Skipped words:</h5>
                                
    
                            </ul>
                        </div>
                    
                </div> -->

                <!-- lazy load -->
                <!-- <img class="mytooltip tooltip-right desktop" width="100%" src="assets/tiny/tooltip-right2.png" alt="right tooltip"> -->
                <div id="tooltipright">
                </div>
            </div>

        </div>

        <!-- Bottom part for desktop -->
        <div class="row bottom flow desktop">
            <div class="col-2 show ">
                <div class="row microw rowmic justify-content-center">

                    <div class="circle">
                        <img class="mx-auto d-block mic" height="50%"src="https://res.cloudinary.com/mohacool/image/upload/v1610675812/mic_jll1aw.png" alt="microphone button">
                    </div>
                    
                    <button id="startRecButton" type="button" style="display:none"> Start recording</button>
                    <button id="stopRecButton" type="button" style="display:none"> Stop recording</button>
                    <div id="recordingStatus" style="display:none"></div>
                </div>
                
                
            </div>
            <div class="col flow">
                
                <div class="form-group pt-4" >

                    <div class="outer">
                    
                        <div class="result_holder">
                        
                            
        
                            <div class="ResultText">
                                
                                
                                <span class="greyText">
                                </span>
                            
                            </div>
                            
                            
                            
                        </div>
                    </div>
                    <div class="row">
                        <div class="mx-auto">
                            <button class="reset">Reset</button>
                            <button class="skipword">Skip Word</button>
                        </div>
                        <!-- <button class="mx-auto skipword">Skip Word</button> -->

                    </div>
                    <!-- <div class="result_holder" style="background-color:#90dcd9">
                        <div id="mytranscript"></div>
                    </div> -->
                </div>
            </div>

            <div class="col-2 h-100">
                <!-- <button id="skipword">Skip</button> -->
                <div class="row microw rowplay justify-content-center flow">
                    <img class="leftrewind" src="https://res.cloudinary.com/mohacool/image/upload/v1610675834/left-rewind-min_pxirzg.png" height="25px" alt="left rewind button">
                    <div class="playbutton">
                        <img class="mx-auto pl-2 d-block play_arrow" height="45%" src="https://res.cloudinary.com/mohacool/image/upload/v1610675854/play_arrow_zmcpcg.png" alt="play button">
                        <img class="mx-auto pl-2 d-block pause" height="50%" src="https://res.cloudinary.com/mohacool/image/upload/v1610675869/pause_r13lod.png" alt="pause button">
                    </div>
                    <img class="rightrewind" src="https://res.cloudinary.com/mohacool/image/upload/v1610675897/right-rewind-min_ot3wkk.png" height="25px" alt="right rewind button">

                
                </div>
                
                
            </div>
        </div>

        <div class="row desktop flow">
            <!-- lazy load -->
            <!-- <a href="buythebook" target="_blank" class="mx-auto">
                <div class="mx-auto" >
                    <img class="cart" src="assets/cart.png" height="40px" alt="cart button">
                    <img class="buytooltip" src="assets/tiny/buytooltip.png" height="70px" alt="Buying tooltip">
                </div>
            </a> -->
            <div id="buybook" class="mx-auto">
                
            </div>
            
            
        </div>

        <!-- Skip word for mobile -->
        <div class="row pb-1 mobile">
            <div class="mx-auto">
                <button class="reset">Reset</button>
                <button class="skipword">Skip Word</button>
            </div>
            <!-- <button class="mx-auto my-0 py-0 skipword">Skip Word</button> -->

        </div>

        <!-- Bottom part for mobile -->
        <div class="row bottom flow mobile">
            <div class="col flow">
                
                <div class="form-group" >
                    
                    <div class="result_holder">
                       
                        
    
                        <div class="ResultText">
                            
                            
                            <span class="greyText">
                            </span>
                        
                        </div>
                        
                        
                        
                    </div>
                   
                    <!-- <div class="result_holder" style="background-color:#90dcd9">
                        <div id="mytranscript"></div>
                    </div> -->
                </div>
            </div>
        </div>

        <!-- MIC / PLAY ROW for mobile -->
        <div class="row flow mobile d-flex">
            <div class="col blow justify-content-center  my-0 py-0 px-0 mx-0">
                <div class="row-12 flow d-block">
                    <div class="circle mx-auto" >
                        <img class="mx-auto d-block mobilemic" height="50%"src="https://res.cloudinary.com/mohacool/image/upload/v1610675812/mic_jll1aw.png" alt="microphone">
                    </div>
                </div>
                <div class="row d-flex px-0 mx-0">
                    <h5 class="pt-1 mx-auto buttontexts">PRONONCE</h5>
                </div>
                
                
               
                
            </div>
            <div class="col blow justify-content-center px-0 mx-0">
                <a href="buythebook" style="cursor:pointer">

                    <div class="row flow px-0 mx-0">
                        <img class="mx-auto" src="https://res.cloudinary.com/mohacool/image/upload/v1610675938/cart_pqrluq.png" height="35px" alt="cart">
                    </div>
                    <div class="row flow px-0 mx-0">
                        <h5 class="buytext-mobile mx-auto">Buy complete <br> Book + Audiobook</h5>
                    </div>
                </a>
               
                
            </div>
            <div class="col blow d-flex justify-content-center my-0 px-0 py-0 mx-0">
                <div class="row d-flex flow px-1 mx-0 playrow">
                    <img class="leftrewind" src="https://res.cloudinary.com/mohacool/image/upload/v1610675834/left-rewind-min_pxirzg.png" alt="left rewind button">
                    <div class="playbutton">
                        <img class=" pl-2 d-block play_arrow" src="https://res.cloudinary.com/mohacool/image/upload/v1610675854/play_arrow_zmcpcg.png" alt="play button">
                        <img class="pl-2 d-block pause"  src="https://res.cloudinary.com/mohacool/image/upload/v1610675869/pause_r13lod.png" alt="pause button">
                    </div>
                    <img class="rightrewind" src="https://res.cloudinary.com/mohacool/image/upload/v1610675897/right-rewind-min_ot3wkk.png" alt="right rewind button">
                    <h5 class="pt-1 buttontexts ecoute">ECOUTE</h5>
                </div>
                <!-- <div class="row d-flex">
                    
                </div> -->
               
               
                
            </div>
        </div>


        <!-- <div class="row flow mobile pt-1">
            <div class="col d-flex flow justify-content-center px-0 mx-0">
                <h5>PRONONCE</h5>
            </div>
            <div class="col d-flex flow justify-content-center px-0 mx-0">
            </div>
            <div class="col d-flex flow justify-content-center pr-3 mx-0">
                <h5>ECOUTE</h5>
            </div>
        </div> -->
        
    </div>



    <!-- Nlp -->
    <!-- <script src="https://unpkg.com/compromise@11.14.3/builds/compromise.min.js"></script> -->

    <!-- Socket -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.1/socket.io.js" integrity="sha512-vGcPDqyonHb0c11UofnOKdSAt5zYRpKI4ow+v6hat4i96b7nHSn8PQyk0sT5L9RECyksp+SztCPP6bqeeGaRKg==" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.1/socket.io.min.js" integrity="sha512-gVG6WRMUYFaIdoocaxbqd02p3DUbhReTBWc7NTGB96i7vONrr7GuCZJHFFmkXEhpwilIWUnfRIMSlKaApwd/jg==" crossorigin="anonymous"></script>



    <!-- Client -->
    <script src="assets/js/client2.js"></script>
    <!-- <script src="../public/js/client.js"></script> -->
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>

<script>

    
    function parseJwt (token) {
        var base64Url = token.split('.')[1];
        var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));

        return JSON.parse(jsonPayload);
    };


    async function get_progress(){
        var token = localStorage.getItem('token');
        if (token!=null){
            console.log("===================== FETCHING PROGRESS=====================");

            const result = await fetch('/api/get_progress',{
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    token
                })
                }).then((res) => res.json())
                .then(function (data) {  
                    console.log('Request success: ', data);  
                }) 

        }
 
        
    }
    // THIS FUNCTION ONLY WORKS WHEN SIGNED IN (only when token exists)
    async function update_progress() {
        var token = localStorage.getItem('token');

        if (token!=null){
            console.log("=====================UPDATING PROGRESS=====================");
        
            var words_complete = parseInt(localStorage.getItem('words_completed'));
            var skip_indices = JSON.parse(localStorage.getItem('skipped_words'));
            
            var id = parseJwt(localStorage.getItem('token')).id; // used to update the database later
            console.log(id);

        

            // IF USER HAS MADE PROGRESS (If either values exists)
            if (words_complete !=null || skip_indices !=null){

                if (words_complete == null){
                    words_complete = 0
                }
                if (skip_indices == null){
                    skip_indices = []
                }


                const result = await fetch('/api/update_progress',{
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        words_complete,
                        skip_indices,
                        token
                    })
                }).then((res) => res.json())

            }
        }
 
    }

    function signout(){


        // CHECK IF TOKEN EXISTS

        // Update the current user spot in the database when they sign out
        update_progress();

        localStorage.clear();
        location.reload();
        

        
    }

    function adjust_elements(){

        // Desktop
        if(window.innerWidth>=1024){

            // NOT SIGNED IN
            if (!token){
                $('#registerbutton').css('display', 'flex');
                $('#signinbutton').css('display', 'flex');
            }
            else{
                $('#registerbutton').css('display', 'none');
                $('#signinbutton').css('display', 'none');
                $('.user_button').show();
            }
            
        }
        // MOBILE
        else{
            $('#registerbutton').css('display', 'none');
            $('#signinbutton').css('display', 'none');

            // $('#username').hide();
            // $("#signout_button").hide();

            $('.user_button').hide();
        }
    }
    // const token = localStorage.getItem('token')

    // IF NOT SIGNED IN
    if (!token){

        // document.getElementById('username').innerHTML = "";
        $('.user_button').hide();


        $("#signout_button").hide();
        $('.signout_mobile').hide();

        adjust_elements();
      
    }   
    // IF SIGNED IN
    else{
        const name = parseJwt(token).name;

        const first_name = name.split(" ")[0].slice(0,1).toUpperCase()+name.split(" ")[0].slice(1);
        // --------------------- DESKTOP ---------------------
        $('.user_button').show();
        // SIGNED IN
        $('.user_toggle').html(first_name);
        // document.getElementById('username').innerHTML = `Hello ${name}`;
        // $("#signout_button").show();


        // --------------------- MOBILE ---------------------

        // SIGNED IN
        document.getElementById('hello_mobile').innerHTML = `Hello ${first_name}`;

        // Hide sign in, sign up
        $('.signin').hide();
        $('.register').hide();

        // Show mobile sign_out
        $('.signout_mobile').show();

        
        adjust_elements();
        
    }


    /* Tooltips activate */
    $(function () {
        $('[data-toggle="tooltip"]').tooltip({
            html:true
        });
    })
    
    const logout = document.getElementById("logout");
   
   
    logout.addEventListener("click", function () {
        localStorage.clear();
        // window.location.href = "./";
        // change the logout button to login button
        document.getElementById('logout').innerHTML = "login";
    });

    $('.signin').on('click',function(){
        window.location.href = "./login";
        localStorage.setItem('signup', false);
    })
    $('.register').on('click',function(){
        window.location.href = "./login";
        localStorage.setItem('signup', true); 
    })

    $('.createacc_button').on('click',function(){
        window.location.href = "./login";
        localStorage.setItem('signup', true);
    })



    // LOAD IMAGES ONLY FOR DESKTOP VERSION
    if (window.innerWidth>=1024){
        $('#tooltipleft').html(`<img class="mytooltip tooltip-left desktop" width="100%" src="https://res.cloudinary.com/mohacool/image/upload/v1610676021/tooltip-left2_phowje.png" alt="left tooltip">`);
        $('#tooltipright').html(`<img class="mytooltip tooltip-right desktop" width="100%" src="https://res.cloudinary.com/mohacool/image/upload/v1610676039/tooltip-right2_wukzkc.png" alt="right tooltip">`);
        $('#buybook').html(`<a href="buythebook" target="_blank" class="mx-auto">
                <div class="mx-auto" >
                    <img class="cart" src="https://res.cloudinary.com/mohacool/image/upload/v1610675938/cart_pqrluq.png" height="40px" alt="cart button">
                    <img class="buytooltip" src="https://res.cloudinary.com/mohacool/image/upload/v1610676076/buytooltip_mzz1ee.png" height="70px" alt="Buying tooltip">
                </div>
            </a>`);
    }
    

    // RESIZE
    $(window).on('resize', function(){

        // DESKTOP 
        if (window.innerWidth>=1024){
            $('#tooltipleft').html(`<img class="mytooltip tooltip-left desktop" width="100%" src="https://res.cloudinary.com/mohacool/image/upload/v1610676021/tooltip-left2_phowje.png" alt="left tooltip">`);
            $('#tooltipright').html(`<img class="mytooltip tooltip-right desktop" width="100%" src="https://res.cloudinary.com/mohacool/image/upload/v1610676039/tooltip-right2_wukzkc.png" alt="right tooltip">`);
            $('#buybook').html(`<a href="buythebook" target="_blank" class="mx-auto">
                <div class="mx-auto" >
                    <img class="cart" src="https://res.cloudinary.com/mohacool/image/upload/v1610675938/cart_pqrluq.png" height="40px" alt="cart button">
                    <img class="buytooltip" src="https://res.cloudinary.com/mohacool/image/upload/v1610676076/buytooltip_mzz1ee.png" height="70px" alt="Buying tooltip">
                </div>
            </a>`);
            
            // If not signed in keep buttons
            if (!token){
                $('#registerbutton').css('display', 'flex');
                $('#signinbutton').css('display', 'flex');
                
            }
            // If signed in 
            else{
                // $('#username').show();
                // $("#signout_button").show();
                $('.user_button').show();
               
            }
            
        }
        // MOBILE
        else{
            // Remove sign in sign out buttons
            $('#registerbutton').css('display', 'none');
            $('#signinbutton').css('display', 'none');

            $('.user_button').hide();

            // If signed in + [ON MOBILE]
            if (token){
                

                // Remove desktop version of HELLO
                $('#username').hide();
                $("#signout_button").hide();
            }
            
        }
    })

    // ================ OBJECTIVE ===================
    var objective_selected = 0;
    $('.objective_button').on('click',function(){

        // remove the 'no objective selected ' msg
        $('.no_objective_selected').css('display','none');

        const objective_class= this.className.split(" ").slice(-1)[0];
        objective_selected = objective_class.slice(-1); // set the number:  objective_button1 => 1
        // alert(objective_class);
        
        // Keep the selected button highlighted
        $('.objective_button').css('background-color','white');
        $('.'+objective_class).css('background-color','#cff2f5'); // selected color
    })

    $('.objective_continue').on('click',function(){
        
        if (objective_selected == 0){
            $('.no_objective_selected').css('display','flex');
        }
        else{
            
            localStorage.setItem('daily_objective', objective_selected*5);
            $('.no_objective_selected').css('display','none');
            $('#objectiveModal').modal('hide');
            $('#createaccModal').modal();


        }
        
    })
    $('.not_now').on('click',function(){
        $('#createaccModal').modal('hide');
    })

    


   
    
</script>


<script src="assets/js/script.js"></script>
<script src="https://cdn.plyr.io/3.6.3/plyr.js"></script>
    <script>
        const player = new Plyr('#player',{
            controls:[ 'progress', 'current-time', 'mute', 'volume', 'captions'],
            speed: { selected: 1, options: [0.5, 0.75, 1, 1.25, 1.5, 1.75, 2] }
        });

        

    </script>

</html>